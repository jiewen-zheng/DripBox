# [DripBox] 三轴半自动给药箱


> `DripBox`是一个二轴机械云台加一轴丝杆点击组成的半自动滴液箱，其最大亮点是实现半自动化面膜喷液与滴液，然而实现起来最为复杂的功能是使用`wifi`升级`屏幕`、`控制主板`及其自身。

---
## 1.项目说明

### 1.1项目文件说明

#### 1.1.1 hardware

Hardware文件夹内是DripBox中所有电路的原理图和PCB文件。

一共有如下板子：

- **ControlBoard**：电机控制板PCB，主控为GD32E230C8T6，仅可接收串口指令运行。
- **WiFiBoard**：屏幕交互和决策PCB，主控为ESP32-S3，负责屏幕逻辑和决策控制`ControlBoard`，是整个项目的主脑。

#### 1.1.2 firmware

firmware中提供了上面所有板子的固件源码， 主要包含以下两个工程：

- **DripBox-host-fw**：wifi板固件，主要实现了基于`FATFS`文件系统，用于存储和管理下载的更新文件、屏幕串口处理协议、电机控制板串口协议、Ymodem升级主机。
- **DripBox-slave-fw**：电机控制板的固件，主要实现了基于步进电机`STEP`接口驱动、串口协议解析/发送、获取传感器数据等功能。

#### 1.1.3 software

software中提供了关于屏幕的开发工程，此屏幕是基于`迪文科技`480*800分辨率的嵌入式串口屏，可使用官方套件进行开发生成对应下载文件，需要注意的是背景图片需要打包成`.icl`文件下载



## 2.软件架构说明

**关于电机控制板更新方式？**

在[DripBox-slave-fw]文件中包含了`app`和`boot`工程，其中`boot`采样了`Ymodem`协议方式升级，串口只要检测到`upgread`字符串就会进入`bootload`程序中运行。

## 3.二次开发

待补充。
